---
- name: Remove unneeded packages
  become: true
  apt:
    name:
      - aisleriot
      - apport
      - apport-symptoms
      - branding-ubuntu
      - brltty
      - cheese
      - deja-dup
      - example-content
      - firefox
      - gir1.2-totemplparser-1.0
      - gnome-accessibility-themes
      - gnome-calendar
      - gnome-getting-started-docs
      - gnome-initial-setup
      - gnome-mahjongg
      - gnome-mines
      - gnome-software-common
      - gnome-sudoku
      - gnome-todo-common
      - gnome-video-effects
      - guile-2.0-libs
      - libgnome-games-support-common
      - libgnome-todo
      - libtotem0
      - mousetweaks
      - nautilus-sendto
      - orca
      - remmina-common
      - thunderbird
      - totem-common
      - ubuntu-report
      - ubuntu-web-launchers
      - whoopsie
    state: absent
    purge: true

- name: Remove dependencies that are no longer required
  become: true
  apt:
    autoremove: true

- name: Delete unnecessary examples.desktop file
  become_user: '{{user}}'
  file:
    path: ~/examples.desktop
    state: absent

- name: Mask unwanted GNOME services
  become_user: '{{user}}'
  systemd:
    name: '{{item}}'
    scope: user
    masked: true
    state: stopped
  loop:
    - evolution-addressbook-factory.service
    - evolution-calendar-factory.service
    - evolution-source-registry.service
    - gvfs-goa-volume-monitor.service
